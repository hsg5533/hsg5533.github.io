"use strict";(self.webpackChunkhsg533_web=self.webpackChunkhsg533_web||[]).push([[931],{5931:(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});var s=i(5043),r=i(579);class o{constructor(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.targetInput=void 0,this.config=void 0,this.indicatorHtml="",this.totalTicks=void 0,this.degreesTick=void 0,this.diameter=void 0,this.labelOffset=void 0,this.wrapperId=void 0,this.wrapperElement=void 0,this.targetInput=document.querySelector(e),this.config=Object.assign({maxValue:180,smallFactor:10,dangerRange:120,initialAngle:-45,totalAngle:270,outerRadius:150,needleHeight:4,needleOffset:95,needleLength:13,indicatorRadius:125,labelRadius:90,labelSize:80,smallTick:2,multiplier:1,majorTickWidth:20,majorTickHeight:4,minorTickWidth:10,minorTickHeight:3,eventType:"change",unitLabel:"km/h"},i),this.indicatorHtml="",this.totalTicks=this.config.maxValue/this.config.smallFactor,this.degreesTick=this.config.totalAngle/this.totalTicks,this.diameter=2*this.config.outerRadius,this.labelOffset=this.config.outerRadius-this.config.labelSize/2,this.wrapperId="speedometerWrapper-"+this.targetInput.id;const s=document.createElement("div");s.id=this.wrapperId,null===(t=this.targetInput.parentNode)||void 0===t||t.insertBefore(s,this.targetInput),s.appendChild(this.targetInput),this.wrapperElement=s,this.wrapperElement.insertAdjacentHTML("beforeend",`<style>#${this.wrapperId} .envelope{width:${this.diameter}px;height:${this.diameter}px;}#${this.wrapperId} .speedNobe{height:${this.config.needleHeight}px;top:${this.config.outerRadius-this.config.needleHeight/2}px;transform:rotate(${this.config.initialAngle}deg);}#${this.wrapperId} .speedPosition{width:${this.config.labelSize}px;height:${this.config.labelSize}px;top:${this.labelOffset}px;left:${this.labelOffset}px;}#${this.wrapperId} .speedNobe div{width:${this.config.needleOffset}px;left:${this.config.needleLength}px;}#${this.wrapperId} .nob{width:${this.config.majorTickWidth}px;height:${this.config.majorTickHeight}px;}#${this.wrapperId} .numb{width:${this.config.majorTickWidth}px;height:${this.config.majorTickHeight}px;}#${this.wrapperId} .midTick{width:${this.config.minorTickWidth}px;height:${this.config.minorTickHeight}px;}</style>`);for(let r=0;r<=this.totalTicks;r++){const e=this.config.initialAngle+r*this.degreesTick,t=r*this.config.smallFactor>=this.config.dangerRange?"danger":"",i=Math.PI/180*e,s=this.config.indicatorRadius*Math.cos(i),o=this.config.indicatorRadius*Math.sin(i),n=this.config.labelRadius*Math.cos(i),a=this.config.labelRadius*Math.sin(i);r%this.config.smallTick===0?this.indicatorHtml+=`<div class="nob ${t}"style="left:${this.config.outerRadius-s-10}px;top:${this.config.outerRadius-o-2}px;transform:rotate(${e}deg);"></div><div class="numb ${t}"style="left:${this.config.outerRadius-n-this.config.majorTickHeight/2}px;top:${this.config.outerRadius-a-this.config.majorTickWidth/2}px;"></div>`:this.indicatorHtml+=`<div class="nob ${t} midTick"style="left:${this.config.outerRadius-s-this.config.minorTickWidth/2}px;top:${this.config.outerRadius-o-this.config.minorTickHeight/2}px;transform:rotate(${e}deg);"></div><div class="numb"></div>`}this.wrapperElement.insertAdjacentHTML("beforeend",`<div class="envelope"><div class="speedNobe"><div></div></div><div class="speedPosition"></div>${this.indicatorHtml}</div>`),this.targetInput.addEventListener(this.config.eventType,(()=>{const e=parseFloat(this.targetInput.value),t=this.config.totalAngle/this.config.maxValue*e+this.config.initialAngle;this.wrapperElement.querySelector(".speedNobe").style.transform=`rotate(${t}deg)`;const i=this.wrapperElement.querySelectorAll(".envelope .nob"),s=this.wrapperElement.querySelectorAll(".envelope .numb");this.wrapperElement.querySelector(".speedPosition").innerHTML=`<strong>${e*this.config.multiplier}%</strong><br/>${this.config.unitLabel}`,i.forEach((e=>e.classList.remove("bright"))),s.forEach((e=>e.classList.remove("bright")));for(let r=0;r<=this.totalTicks&&e>=r*this.config.smallFactor;r++)i[r].classList.add("bright"),s[r].classList.add("bright")}))}}class n{constructor(e){this.targetInput=void 0,this.workerList=void 0,this.workerMessage=void 0,this.totalCore=void 0,this.scores=void 0,this.cores=void 0,this.progress=void 0,this.progressBar=void 0,this.singleScore=void 0,this.singleBench=void 0,this.multiScore=void 0,this.multiBench=void 0,this.startButtons=void 0,this.restartIcon=void 0,this.singleInterval=void 0,this.multiInterval=void 0,this.workerList=[],this.workerMessage=[],this.totalCore=navigator.hardwareConcurrency||1,this.targetInput=document.querySelector(e),this.scores=document.querySelector(".scores"),this.cores=document.querySelector(".detected span"),this.progress=document.querySelector(".progress-bar"),this.progressBar=document.querySelector(".progress-bar div"),this.singleScore=document.querySelector("#single .score"),this.singleBench=document.querySelector("#single .bench"),this.multiScore=document.querySelector("#multi .score"),this.multiBench=document.querySelector("#multi .bench"),this.startButtons=document.querySelectorAll("#start, .restart"),this.restartIcon=document.querySelector(".restart"),this.singleInterval=null,this.multiInterval=null}init(){this.updateSpeedometer(0),this.cores.textContent=String(this.totalCore),this.startButtons.forEach((e=>{e.addEventListener("click",(()=>{let e=0,t=0;this.workerList=[],this.workerMessage=[],this.scores.style.display="block",this.progress.classList.add("visible"),this.startButtons.forEach((e=>e.style.display="none")),this.progressBar.style.transition="width 20s linear",this.progressBar.style.width="100%",this.singleScore.style.display="none",this.singleBench.style.display="inline-block",this.updateSpeedometer(Math.floor(100/this.totalCore)),this.createWorker(),this.singleInterval=window.setInterval((()=>{e++,this.progressBar.textContent=`${e}%`,e>=100&&(this.singleInterval&&clearInterval(this.singleInterval),this.singleBench.style.display="none",this.singleScore.style.display="inline-block",this.singleScore.textContent=String(this.workerMessage[0]),this.progressBar.style.transition="width 0s linear",this.progressBar.style.width="0%",this.progressBar.textContent="0%",this.updateSpeedometer(0),this.workerList.forEach((e=>e.terminate())),this.workerList=[],this.workerMessage=[],setTimeout((()=>{for(let e=0;e<this.totalCore;e++)this.createWorker();this.progressBar.style.transition="width 20s linear",this.progressBar.style.width="100%",this.multiScore.style.display="none",this.multiBench.style.display="inline-block",this.updateSpeedometer(100),this.multiInterval=window.setInterval((()=>{t++,this.progressBar.textContent=`${t}%`,t>=100&&(this.multiInterval&&clearInterval(this.multiInterval),this.progress.classList.remove("visible"),this.multiBench.style.display="none",this.restartIcon.style.display="inline-block",this.multiScore.style.display="inline-block",this.multiScore.textContent=String(this.workerMessage.reduce(((e,t)=>e+t),0)),this.progressBar.style.transition="width 0s linear",this.progressBar.style.width="0%",this.progressBar.textContent="0%",this.workerList.forEach((e=>e.terminate())),this.workerList=[],this.updateSpeedometer(0))}),200)}),1e3))}),200)}))}))}updateSpeedometer(e){this.targetInput.value=String(e),this.targetInput.dispatchEvent(new Event("change"))}createWorker(){const e=new Blob(["for(;;)fibonacci(32),postMessage('u');function fibonacci(n){return n<=1?1:fibonacci(n-1)+fibonacci(n-2)}"],{type:"application/javascript"}),t=new Worker(URL.createObjectURL(e)),i=this.workerMessage.length;this.workerList.push(t),this.workerMessage.push(0),t.onmessage=()=>this.workerMessage[i]++}}function a(){return(0,s.useEffect)((()=>{const e="#velocimetro";new o(e,{maxValue:100,dangerRange:90,unitLabel:"<small>CPU Usage</small>"}),new n(e).init()}),[]),(0,r.jsxs)("main",{children:[(0,r.jsx)("div",{className:"vel-container",children:(0,r.jsx)("input",{type:"hidden",id:"velocimetro"})}),(0,r.jsx)("br",{}),(0,r.jsxs)("p",{className:"detected",children:[(0,r.jsx)("span",{})," cores detected"]}),(0,r.jsx)("div",{className:"center",children:(0,r.jsxs)("button",{id:"start",className:"start",children:[(0,r.jsx)("b",{children:"START"}),(0,r.jsx)("br",{}),"Benchmark"]})}),(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{children:"0%"})}),(0,r.jsx)("div",{className:"center iconos",children:(0,r.jsx)("div",{className:"icon restart",children:(0,r.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"undo-alt",className:"svg-inline--fa fa-undo-alt fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,r.jsx)("path",{d:"M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"})})})}),(0,r.jsxs)("section",{className:"scores",children:[(0,r.jsx)("h4",{children:"Scores"}),(0,r.jsxs)("div",{id:"single",children:[(0,r.jsx)("div",{children:"Single core:"}),(0,r.jsx)("div",{className:"score"}),(0,r.jsx)("div",{className:"bench"})]}),(0,r.jsxs)("div",{id:"multi",children:[(0,r.jsx)("div",{children:"Multi core:"}),(0,r.jsx)("div",{className:"score"}),(0,r.jsx)("div",{className:"bench"})]})]})]})}}}]);
//# sourceMappingURL=931.f643f53f.chunk.js.map